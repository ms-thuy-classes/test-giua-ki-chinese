<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panda Quiz Fix - 40 C√¢u</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Quicksand', sans-serif;
            background: linear-gradient(135deg, #fce7f3, #e0f2fe, #dcfce7);
            min-height: 100vh; display: flex; align-items: center; justify-content: center;
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 2.5rem;
            box-shadow: 0 20px 50px rgba(0,0,0,0.05);
        }
        .progress-bg { height: 12px; background: #f1f5f9; border-radius: 10px; position: relative; }
        #progress-bar { height: 100%; background: #ec4899; border-radius: 10px; transition: width 0.4s; }
        #panda-walker { position: absolute; top: -35px; right: -20px; width: 45px; transition: right 0.4s; }
        
        /* Hi·ªáu ·ª©ng m√†u s·∫Øc ph·∫£n h·ªìi */
        .correct-flash { background-color: #dcfce7 !important; border-color: #22c55e !important; color: #166534 !important; }
        .wrong-flash { background-color: #fee2e2 !important; border-color: #ef4444 !important; color: #991b1b !important; }
        
        .hidden-page { display: none; }
    </style>
</head>
<body>

    <div id="quiz-app" class="w-full max-w-3xl px-4 py-8">
        
        <div id="start-page" class="glass-card p-10 text-center">
            <img src="https://img.icons8.com/bubbles/200/panda.png" class="mx-auto mb-4">
            <h1 class="text-3xl font-bold text-gray-800 mb-6">Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi b√†i ki·ªÉm tra! üêº</h1>
            <input type="text" id="student-name" placeholder="Nh·∫≠p t√™n h·ªçc sinh..." 
                class="w-full max-w-sm p-4 rounded-2xl border-2 border-pink-100 outline-none text-center text-xl mb-8">
            <br>
            <button onclick="startQuiz()" class="bg-pink-500 hover:bg-pink-600 text-white font-bold py-4 px-12 rounded-full text-xl shadow-lg transform transition hover:scale-105">
                B·∫Øt ƒë·∫ßu ngay
            </button>
        </div>

        <div id="question-page" class="glass-card p-8 hidden-page">
            <div class="mb-12 relative">
                <div class="progress-bg">
                    <div id="progress-bar" style="width: 0%"><img id="panda-walker" src="https://img.icons8.com/color/48/panda.png"></div>
                </div>
                <div class="flex justify-between mt-2 text-sm font-bold text-pink-500">
                    <span id="q-number">C√¢u 1/40</span>
                    <span id="score-text">ƒê√∫ng: 0</span>
                </div>
            </div>

            <h2 id="question-text" class="text-2xl md:text-3xl font-bold text-gray-800 mb-8 text-center leading-relaxed"></h2>
            
            <div id="options-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>

            <div id="input-area" class="hidden-page text-center">
                <input type="text" id="fill-answer" placeholder="G√µ c√¢u tr·∫£ l·ªùi b·∫±ng ti·∫øng Trung..." 
                    class="w-full p-5 rounded-2xl border-2 border-teal-100 outline-none text-center text-xl shadow-inner mb-6 transition-all duration-300">
                <button onclick="checkFillAnswer()" id="submit-btn" class="bg-teal-500 hover:bg-teal-600 text-white px-10 py-4 rounded-full font-bold text-lg shadow-md active:scale-95">
                    N·ªôp c√¢u tr·∫£ l·ªùi
                </button>
            </div>
        </div>

        <div id="result-page" class="glass-card p-12 text-center hidden-page">
            <h2 class="text-4xl font-bold text-pink-600 mb-4">Ho√†n th√†nh! üéâ</h2>
            <p id="final-msg" class="text-xl text-gray-600 mb-8"></p>
            <div class="text-7xl font-bold text-gray-800 mb-10" id="final-score">0/40</div>
            <button onclick="location.reload()" class="bg-gray-800 text-white py-4 px-12 rounded-full font-bold hover:bg-black transition">L√†m l·∫°i b√†i</button>
        </div>
    </div>

    <audio id="s-correct" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
    <audio id="s-wrong" src="https://assets.mixkit.co/active_storage/sfx/2021/2021-preview.mp3"></audio>

    <script>
        const quizData = [
            // 30 c√¢u tr·∫Øc nghi·ªám [cite: 3-33]
            { q: "n«ê h«éo:", type: "mcq", options: ["ÂÜçËßÅ", "‰Ω†Â•Ω", "Ë∞¢Ë∞¢", "‰∏çÂÆ¢Ê∞î"], correct: 1 },
            { q: "l«éoshƒ´:", type: "mcq", options: ["ËÄÅÂ∏à", "Â≠¶Áîü", "Ê±âËØ≠", "‰∏≠ÂõΩ"], correct: 0 },
            { q: "m√≠ngtiƒÅn:", type: "mcq", options: ["Êò®Â§©", "‰ªäÂ§©", "ÊòéÂ§©", "Áé∞Âú®"], correct: 2 },
            { q: "chƒ´:", type: "mcq", options: ["Áúã", "ÂêÉ", "Âéª", "Â≠¶"], correct: 1 },
            { q: "sh√©nme:", type: "mcq", options: ["‰ªÄ‰πà", "Âì™ÂÑø", "Ë∞Å", "ÊÄé‰πà"], correct: 0 },
            { q: "ÂÜçËßÅ:", type: "mcq", options: ["Xin ch√†o", "C·∫£m ∆°n", "T·∫°m bi·ªát", "Xin l·ªói"], correct: 2 },
            { q: "Â≠¶Áîü:", type: "mcq", options: ["Gi√°o vi√™n", "H·ªçc sinh", "B·∫°n b√®", "Ng∆∞·ªùi TQ"], correct: 1 },
            { q: "Âì™ÂÑø:", type: "mcq", options: ["Khi n√†o", "Ai", "·ªû ƒë√¢u", "T·∫°i sao"], correct: 2 },
            { q: "Ê±âËØ≠:", type: "mcq", options: ["Ti·∫øng Anh", "Ti·∫øng Nh·∫≠t", "Ti·∫øng Trung", "Ti·∫øng H√†n"], correct: 2 },
            { q: "ÂêÉ:", type: "mcq", options: ["U·ªëng", "Nghe", "ƒÇn", "H·ªçc"], correct: 2 },
            { q: "Êàë ___ Ê±âËØ≠„ÄÇ", type: "mcq", options: ["Áúã", "Â≠¶‰π†", "ÂêÉ", "Âéª"], correct: 1 },
            { q: "‰Ω† ___ Âì™ÂÑøÔºü", type: "mcq", options: ["ÂêÉ", "Âéª", "Â≠¶", "Áúã"], correct: 1 },
            { q: "___ ËßÅÔºÅ", type: "mcq", options: ["ÊòéÂ§©", "Ë∞¢Ë∞¢", "ÂÜç", "‰∏ç"], correct: 2 },
            { q: "ËøôÊòØ ___ ËÄÅÂ∏à„ÄÇ", type: "mcq", options: ["Êàë", "‰Ω†", "Áéã", "Ë∞Å"], correct: 2 },
            { q: "B·∫°n ƒÉn g√¨?: ‰Ω†ÂêÉ ___Ôºü", type: "mcq", options: ["Âì™ÂÑø", "‰ªÄ‰πà", "Ë∞Å", "ÊÄé‰πà"], correct: 1 },
            { q: "Ch·ªçn c√¢u ƒë√∫ng:", type: "mcq", options: ["‰Ω†ÂéªÂì™", "‰Ω†ÂéªÂì™ÂÑø", "‰Ω†Âì™ÂÑøÂéª", "‰Ω†ÂéªÂÑøÂì™"], correct: 1 },
            { q: "Ch·ªçn c√¢u ƒë√∫ng:", type: "mcq", options: ["ÊàëÂ≠¶‰π†Ê±âËØ≠", "ÊàëÂ≠¶Ê±âËØ≠‰π†", "ÊàëÊ±âËØ≠Â≠¶‰π†", "Â≠¶‰π†ÊàëÊ±âËØ≠"], correct: 0 },
            { q: "Ch·ªçn c√¢u ƒë√∫ng:", type: "mcq", options: ["ËøôÊòØÁéãËÄÅÂ∏à", "ËøôÊòØËÄÅÂ∏àÁéã", "ÊòØËøôÁéãËÄÅÂ∏à", "ÁéãËÄÅÂ∏àËøôÊòØ"], correct: 0 },
            { q: "Ch·ªçn c√¢u ƒë√∫ng:", type: "mcq", options: ["‰Ω†ÂêÉ‰ªÄ‰πà", "‰Ω†‰ªÄ‰πàÂêÉ", "ÂêÉ‰Ω†‰ªÄ‰πà", "‰ªÄ‰πà‰Ω†ÂêÉ"], correct: 0 },
            { q: "Ch·ªçn c√¢u ƒë√∫ng:", type: "mcq", options: ["ÊòéÂ§©ËßÅ", "ËßÅÊòéÂ§©", "ÊòéËßÅÂ§©", "Â§©ËßÅÊòé"], correct: 0 },
            { q: "‚Äî ‰Ω†Â•ΩÔºÅ", type: "mcq", options: ["ÂÜçËßÅ", "‰Ω†Â•Ω", "Ë∞¢Ë∞¢", "ÂØπ‰∏çËµ∑"], correct: 1 },
            { q: "‚Äî ‰Ω†ÂéªÂì™ÂÑøÔºü", type: "mcq", options: ["ÊàëÊòØÂ≠¶Áîü", "ÊàëÂéªÂ≠¶Ê†°", "ÊàëÂêÉËãπÊûú", "ÊàëÂ≠¶‰π†Ê±âËØ≠"], correct: 1 },
            { q: "‚Äî ƒê√¢y l√† ai?: ËøôÊòØË∞ÅÔºü", type: "mcq", options: ["ËøôÊòØÁéãËÄÅÂ∏à", "ÊàëÂéªÂ≠¶Ê†°", "ÊòéÂ§©ËßÅ", "‰Ω†Â•Ω"], correct: 0 },
            { q: "‚Äî B·∫°n h·ªçc g√¨?: ‰Ω†Â≠¶‰π†‰ªÄ‰πàÔºü", type: "mcq", options: ["ÊàëÂ≠¶‰π†Ê±âËØ≠", "ÊàëÂêÉÁ±≥È•≠", "ÊàëÂéª‰∏≠ÂõΩ", "ÊàëÊòØËÄÅÂ∏à"], correct: 0 },
            { q: "‚Äî ÊòéÂ§©ËßÅÔºÅ", type: "mcq", options: ["Ë∞¢Ë∞¢", "ÂØπ‰∏çËµ∑", "ÊòéÂ§©ËßÅ", "‰∏çÂÆ¢Ê∞î"], correct: 2 },
            { q: "S·∫Øp x·∫øp ƒë√∫ng: T√¥i ƒëi tr∆∞·ªùng h·ªçc", type: "mcq", options: ["ÊàëÂéªÂ≠¶Ê†°", "ÂéªÊàëÂ≠¶Ê†°", "Â≠¶Ê†°ÊàëÂéª", "ÂéªÂ≠¶Ê†°Êàë"], correct: 0 },
            { q: "Ch·ªçn c√¢u ƒë√∫ng:", type: "mcq", options: ["ÊàëÂ≠¶‰π†Ê±âËØ≠", "Â≠¶‰π†ÊàëÊ±âËØ≠", "Ê±âËØ≠ÊàëÂ≠¶‰π†", "Â≠¶Ê±âËØ≠Êàë"], correct: 0 },
            { q: "Ch·ªçn c√¢u ƒë√∫ng:", type: "mcq", options: ["‰Ω†ÂêÉ‰ªÄ‰πà", "ÂêÉ‰Ω†‰ªÄ‰πà", "‰ªÄ‰πà‰Ω†ÂêÉ", "ÂêÉ‰ªÄ‰πà‰Ω†"], correct: 0 },
            { q: "S·∫Øp x·∫øp ƒë√∫ng: ƒê√¢y l√† ai", type: "mcq", options: ["ËøôÊòØË∞Å", "Ë∞ÅËøôÊòØ", "ÊòØËøôË∞Å", "Ë∞ÅÊòØËøô"], correct: 0 },
            { q: "Ch·ªçn c√¢u ƒë√∫ng:", type: "mcq", options: ["ËøôÊòØÁéãËÄÅÂ∏à", "ÁéãËÄÅÂ∏àËøôÊòØ", "ÊòØÁéãËÄÅÂ∏àËøô", "ËÄÅÂ∏àÁéãËøôÊòØ"], correct: 0 },

            // 10 c√¢u ƒëi·ªÅn t·ª´ (t·ª´ c√¢u 31-40) [cite: 34-43]
            { q: "31. D·ªãch: B·∫°n kh·ªèe kh√¥ng?", type: "fill", correct: "‰Ω†Â•ΩÂêó" },
            { q: "32. D·ªãch: Ng√†y mai t√¥i ƒëi b∆∞u ƒëi·ªán.", type: "fill", correct: "ÊòéÂ§©ÊàëÂéªÈÇÆÂ±Ä" },
            { q: "33. D·ªãch: Ti·∫øng H√°n kh√¥ng kh√≥ l·∫Øm.", type: "fill", correct: "Ê±âËØ≠‰∏çÂ§™Èöæ" },
            { q: "34. D·ªãch: ƒê√¢y l√† s√°ch c·ªßa t√¥i, kia l√† b√°o c·ªßa th·∫ßy gi√°o.", type: "fill", correct: "ËøôÊòØÊàëÁöÑ‰π¶ÔºåÈÇ£ÊòØËÄÅÂ∏àÁöÑÊä•" },
            { q: "35. D·ªãch: B·∫°n mua bao nhi√™u c√¢n t√°o?", type: "fill", correct: "‰Ω†‰π∞Â§öÂ∞ëÊñ§ËãπÊûú" },
            { q: "36. D·ªãch: Bu·ªïi chi·ªÅu b·∫°n c√≥ ƒëi ng√¢n h√†ng r√∫t ti·ªÅn kh√¥ng?", type: "fill", correct: "‰∏ãÂçà‰Ω†ÂéªÈì∂Ë°åÂèñÈí±Âêó" },
            { q: "37. D·ªãch: Xin h·ªèi, √¥ng ·∫•y l√† gi√°o s∆∞ V∆∞∆°ng ph·∫£i kh√¥ng?", type: "fill", correct: "ËØ∑ÈóÆÔºå‰ªñÊòØÁéãÊïôÊéàÂêó" },
            { q: "38. D·ªãch: T·ªïng c·ªông h·∫øt bao nhi√™u ti·ªÅn? T√¥i g·ª≠i b·∫°n ti·ªÅn n√†y.", type: "fill", correct: "‰∏ÄÂÖ±Â§öÂ∞ëÈí±ÔºüÊàëÁªô‰Ω†Èí±" },
            { q: "39. D·ªãch: H√¥m nay l√† th·ª© b·∫£y, t√¥i v√† l∆∞u h·ªçc sinh ƒëi mua qu√Ωt.", type: "fill", correct: "‰ªäÂ§©ÊòüÊúüÂÖ≠ÔºåÊàëÂíåÁïôÂ≠¶ÁîüÂéª‰π∞Ê©òÂ≠ê" },
            { q: "40. D·ªãch: Canh tr·ª©ng g√† r·∫•t ngon, m·ªùi b·∫°n u·ªëng m·ªôt ch√∫t.", type: "fill", correct: "È∏°ËõãÊ±§ÂæàÂ•ΩÂñùÔºåËØ∑‰Ω†Âñù‰∏ÄÁÇπÂÑø" }
        ];

        let currentIdx = 0, score = 0, studentName = "";

        function startQuiz() {
            studentName = document.getElementById('student-name').value;
            if (!studentName) return alert("Vui l√≤ng nh·∫≠p t√™n h·ªçc sinh!");
            document.getElementById('start-page').classList.add('hidden-page');
            document.getElementById('question-page').classList.remove('hidden-page');
            loadQuestion();
        }

        function loadQuestion() {
            const data = quizData[currentIdx];
            const grid = document.getElementById('options-grid');
            const inputArea = document.getElementById('input-area');
            
            // X√ìA S·∫†CH N·ªòI DUNG C≈® ƒê·ªÇ KH√îNG B·ªä L·∫™N [D√≤ng s·ª≠a l·ªói quan tr·ªçng]
            grid.innerHTML = ''; 
            grid.classList.add('hidden-page');
            inputArea.classList.add('hidden-page');

            document.getElementById('progress-bar').style.width = (currentIdx / 40 * 100) + "%";
            document.getElementById('q-number').innerText = `C√¢u ${currentIdx + 1}/40`;
            document.getElementById('question-text').innerText = data.q;
            
            if (data.type === "mcq") {
                grid.classList.remove('hidden-page');
                data.options.forEach((opt, i) => {
                    const btn = document.createElement('button');
                    btn.className = "p-5 rounded-2xl border-2 border-white bg-white text-xl text-gray-700 shadow-sm transition-all duration-300";
                    btn.innerText = opt;
                    btn.onclick = (e) => handleAnswer(i === data.correct, e.target);
                    grid.appendChild(btn);
                });
            } else {
                inputArea.classList.remove('hidden-page');
                const input = document.getElementById('fill-answer');
                input.value = '';
                input.className = "w-full p-5 rounded-2xl border-2 border-teal-100 outline-none text-center text-xl shadow-inner mb-6 transition-all duration-300";
                input.focus();
            }
        }

        function checkFillAnswer() {
            const userVal = document.getElementById('fill-answer').value.trim();
            const correctVal = quizData[currentIdx].correct;
            const clean = s => s.replace(/[Ôºå„ÄÇÔºüÔºÅ,? ]/g, "");
            handleAnswer(clean(userVal) === clean(correctVal), document.getElementById('fill-answer'));
        }

        function handleAnswer(isCorrect, element) {
            const sound = document.getElementById(isCorrect ? 's-correct' : 's-wrong');
            sound.currentTime = 0; sound.play();

            element.classList.add(isCorrect ? 'correct-flash' : 'wrong-flash');
            if (isCorrect) score++;
            document.getElementById('score-text').innerText = `ƒê√∫ng: ${score}`;

            setTimeout(() => {
                currentIdx++;
                if (currentIdx < quizData.length) loadQuestion();
                else finishQuiz();
            }, 800);
        }

        function finishQuiz() {
            document.getElementById('question-page').classList.add('hidden-page');
            document.getElementById('result-page').classList.remove('hidden-page');
            document.getElementById('final-msg').innerText = `H·ªçc sinh ${studentName} ƒë√£ ho√†n th√†nh b√†i thi!`;
            document.getElementById('final-score').innerText = `${score} / 40`;
        }
    </script>
</body>
</html>
